/*! Leaflet.smart-popup 2013-10-28 */
(function(){L.PopupDown=L.Popup.extend({_initLayout:function(){var t,o="leaflet-popup",i=o+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=L.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=L.DomUtil.create("a",o+"-close-button",n),t.href="#close",t.innerHTML="&#215;",L.DomEvent.disableClickPropagation(t),L.DomEvent.on(t,"click",this._onCloseButtonClick,this)),this._tipContainer=L.DomUtil.create("div",o+"-tip-container",n),this._tip=L.DomUtil.create("div",o+"-tip-down",this._tipContainer);var e=this._wrapper=L.DomUtil.create("div",o+"-content-wrapper",n);L.DomEvent.disableClickPropagation(e),this._contentNode=L.DomUtil.create("div",o+"-content",e),L.DomEvent.on(this._contentNode,"mousewheel",L.DomEvent.stopPropagation),L.DomEvent.on(this._contentNode,"MozMousePixelScroll",L.DomEvent.stopPropagation),L.DomEvent.on(e,"contextmenu",L.DomEvent.stopPropagation)},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=this._animated,i=L.point(this.options.offset);o&&L.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-this._containerHeight-(o?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(o?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}}}),L.popupdown=function(t,o){return new L.PopupDown(t,o)}}).call(this);