/*! Leaflet.smart-popup 2013-10-29 */
(function(){L.SmartPopup=L.Popup.extend({_initLayout:function(){var t,i="leaflet-popup",n=i+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),o=this._container=L.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=L.DomUtil.create("a",i+"-close-button",o),t.href="#close",t.innerHTML="&#215;",L.DomEvent.disableClickPropagation(t),L.DomEvent.on(t,"click",this._onCloseButtonClick,this)),this._tipOnUpper&&(this._tipContainer=L.DomUtil.create("div",i+"-tip-container",o),this._tip=L.DomUtil.create("div",i+"-tip-down",this._tipContainer));var e=this._wrapper=L.DomUtil.create("div",i+"-content-wrapper",o);L.DomEvent.disableClickPropagation(e),this._contentNode=L.DomUtil.create("div",i+"-content",e),L.DomEvent.on(this._contentNode,"mousewheel",L.DomEvent.stopPropagation),L.DomEvent.on(this._contentNode,"MozMousePixelScroll",L.DomEvent.stopPropagation),L.DomEvent.on(e,"contextmenu",L.DomEvent.stopPropagation),this._tipOnUpper||(this._tipContainer=L.DomUtil.create("div",i+"-tip-container",o),this._tip=L.DomUtil.create("div",i+"-tip",this._tipContainer))},setTipOnUpper:function(t){return this._tipOnUpper=t,this},setXOffset:function(t){return this._xOffect=t,this},_tipOnUpper:!1,_xOffect:0,_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=this._animated,n=L.point(this.options.offset);i&&L.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(i?0:t.y),this._tipOnUpper&&(this._containerBottom-=this._containerHeight),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(i?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft-this._xOffect+"px",this._xOffect>0?this._tipContainer.style.marginRight=this._containerWidth/2-Math.abs(this._xOffect)-20+"px":0>this._xOffect&&(this._tipContainer.style.marginLeft=this._containerWidth/2-Math.abs(this._xOffect)-20+"px")}}}),L.smartPopup=function(t,i){return new L.SmartPopup(t,i)}}).call(this);